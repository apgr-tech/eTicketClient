<:Head>
    <title>Test Route</title>
</:Head>

<SiteLayout>
    Ejemplo de fetch con un promise
    {{#await icons}}
    <p>wait for it...</p>
    {{then icons}}
        {{#each icons as icon}}
            <p>Icon: {{icon.name}}!</p>
        {{/each}}
    {{catch error}}
    <p>well that's odd {{error}}</p>
    {{/await}}

</SiteLayout>



<script>
    import SiteLayout from './_components/SiteLayout.html';
    export default {
        preload() {
            var urly = 'https://raw.githubusercontent.com/mspanish/playground/master/kwippe_icons';
            return fetch(urly) // <!-- note that we're *returning* the promise this time
                .then(res => res.json())
                .then(data => {
                    console.log(data);
                    return {icons: data}; // <!-- and we're returning the result, rather than this.set(...)
                });
        },
        components: {
            SiteLayout,
        }
    }
</script>